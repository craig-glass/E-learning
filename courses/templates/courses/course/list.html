{% extends "base.html" %}
{% block title %}
{% if subject %}
{{ subject.title }}courses
{% else %}
All courses
{% endif %}
{% endblock %}

{% block content %}
<h1>
    {% if subject %}
    {{ subject.title }} courses
    {% else %}
    All courses
    {% endif %}
</h1>

<div class="row">
<div class="col-sm-3">
<a href="#menu" id="toggle"><span></span></a>
<div id="menu">
<div class="contents">
    <h3>Subjects</h3>
    <ul id="modules">
        <li {% if not subject %}class="selected"{% endif %}>
        <a href="{% url 'course_list' %}">All</a>
        </li>
        {% for s in subjects %}
        <li {% if subject == s %}class="selected"{% endif %}>
        <a href="{% url 'course_list_subject' s.slug %}">
            {{ s.title }}
            <br><span>{{ s.total_courses }} courses</span>
        </a>
        </li>
        {% endfor %}
    </ul>
</div>
</div>
    </div>
<div class="col-sm-9">
<div class="module">
    {% for course in courses %}
        {% with subject=course.subject %}
        <h3>
            <a href="{% url 'course_detail' course.slug %}">
                {{ course.title }}
            </a>
        </h3>
        <p>
            <a href="{% url 'course_list_subject' subject.slug %}">{{ subject }}</a>.
            {{ course.total_modules }} modules.
            Instructor: {{ course.owner.get_full_name }}
        </p>
        {% endwith %}
    {% endfor %}
</div>
</div>
</div>
<script>
var theToggle = document.getElementById('toggle');


function hasClass(elem, className) {
	return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
}
// addClass
function addClass(elem, className) {
    if (!hasClass(elem, className)) {
    	elem.className += ' ' + className;
    }
}
// removeClass
function removeClass(elem, className) {
	var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, ' ') + ' ';
	if (hasClass(elem, className)) {
        while (newClass.indexOf(' ' + className + ' ') >= 0 ) {
            newClass = newClass.replace(' ' + className + ' ', ' ');
        }
        elem.className = newClass.replace(/^\s+|\s+$/g, '');
    }
}
// toggleClass
function toggleClass(elem, className) {
	var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, " " ) + ' ';
    if (hasClass(elem, className)) {
        while (newClass.indexOf(" " + className + " ") >= 0 ) {
            newClass = newClass.replace( " " + className + " " , " " );
        }
        elem.className = newClass.replace(/^\s+|\s+$/g, '');
    } else {
        elem.className += ' ' + className;
    }
}

document.getElementById('toggle').onclick = function() {
   toggleClass(this, 'on');
   return false;
}
</script>


{% endblock %}