{% extends "base.html" %}

{% block title %}
    User Create
{% endblock %}
{% block content %}

    <form id="account-create-form" method="post" action="">
        <table>
            <tr>
                <th><label for="userid" style="clear: left">UserID</label></th>
                <th><input id="userid" type="text" name="userid" style="clear: right"
                           placeholder="&lt autogenerate uid &gt" maxlength="50"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th><label for="password" style="clear: left">Password</label></th>
                <th><input id="password" type="text" name="password" style="clear: right"
                           placeholder="&lt autogenerate changme &gt" maxlength="128"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th>Details</th>
            </tr>
            <tr>
                <th><label for="first-name" style="clear: left">Firstname</label></th>
                <th><input id="first-name" type="text" name="first-name" style="clear: right"
                           placeholder="Enter first name" maxlength="150"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th><label for="last-name" style="clear: left">Lastname</label></th>
                <th><input id="last-name" type="text" name="last-name" style="clear: right"
                           placeholder="Enter last name" maxlength="150"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th>Contact</th>
            </tr>
            <tr>
                <th><label for="email" style="clear: left">Email*</label></th>
                <th><input id="email" type="text" name="email" style="clear: right"
                           placeholder="example@email.com" maxlength="254"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th><label for="phone" style="clear: left">Phone Number</label></th>
                <th><input id="phone" type="text" name="phone" style="clear: right"
                           placeholder="###-####-#######" maxlength="20"></th>
                <th><span class="error">invalid email address</span></th>
            </tr>
            <tr>
                <th><label for="address" style="clear: left">Term Address</label></th>
                <th><input id="address" type="text" name="address" style="clear: right"
                           placeholder="1 Example rd, Example city" maxlength="150"></th>
                <th><span class="error"></span></th>
            </tr>
            <tr>
                <th>Permissions:</th>
            </tr>
            <tr>
                <th><label for="is-student" style="clear: left">Student</label></th>
                <th><input id="is-student" type="checkbox" name="is-student" style="clear: right"></th>
            </tr>
            <tr>
                <th><label for="is-staff" style="clear: left">Staff</label></th>
                <th><input id="is-staff" type="checkbox" name="is-staff" style="clear: right"></th>
            </tr>
            <tr>
                <th><label for="is-admin" style="clear: left">Admin</label></th>
                <th><input id="is-admin" type="checkbox" name="is-admin" style="clear: right"></th>
            </tr>
            <tr>
                <th><input id="account-create-submit" type="submit" value="Submit"></th>
            </tr>
        </table>
    </form>

{% endblock %}
{% block extrajavascript %}
    <script>
        $(document).ready(function () {
            // Form validation functions
            $('#userid').on('input', function() {
                let input = $(this);
                let value = input.val();
                if (!value.match("^ +$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });
            $('#password').on('input', function() {
                let input = $(this);
                let value = input.val()
                if (!value.match("^ +$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });
            $('#first-name').on('input', function() {
                let input = $(this);
                let value = input.val()
                if (!value.match("^ +$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });
            $('#last-name').on('input', function() {
                let input = $(this);
                let value = input.val()
                if (!value.match("^ +$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });
            $('#email').on('input', function () {
                let input = $(this);
                let value = input.val();
                if (value.match("^[^.@]+([.][^.@]+)*@[^.@]+[.][^.@]+([.][^.@]+)*$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
                console.log(input);
            });
            $('#phone').on('input', function() {
                let input = $(this);
                let value = input.val()
                if (!value.match("^ +$") && value.match("[0-9]")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });
            $('#address').on('input', function() {
                let input = $(this);
                let value = input.val()
                if (!value.match("^ +$")) {
                    input.removeClass("invalid").addClass("valid");
                } else {
                    input.removeClass("valid").addClass("invalid");
                }
            });

            // Form submission
            $('#account-create-form').submit(function(e) {
                let formFields = $("#account-create-form").serializeArray();
                let isValid = true;

                return false;
            });
        })
    </script>
{% endblock %}
