{% extends "base.html" %}
{% load course %}
{% block title %}
    Module {{ module.order|add:1 }}:{{ module.title }}
{% endblock %}
{% block navigation %}
    <a href="{% url 'courses:manage_course_list' %}">Your Courses</a>/
    <a href="{% url 'courses:module_list' module.course.id %}">Modules</a>/
    <a href="{% url 'courses:module_content_list' module.course.id %}">Content Edit</a>/
{% endblock %}

{% block content %}
    {% with course=module.course %}
        <h1>Course "{{ course.title }}"<br>Module {{ module.order|add:1 }}: {{ module.title }}</h1>
        <div class="fillx-when-small">
            <a class="link-button" href="{% url 'courses:module_list' module.id %}"
               style="width: 100%">Back to Modules</a>
        </div>

        <h2>Module contents:</h2>
        <a class="link-button" href="{% url "courses:module_content_create" module.id "text" %}">
            <span class="fas fa-spell-check"></span> ADD TEXT
        </a>
        <a class="link-button"
           href="{% url "courses:module_content_create" module.id "image" %}">
            <span class="fas fa-file-image"></span> ADD IMAGE
        </a>
        <a class="link-button"
           href="{% url "courses:module_content_create" module.id "video" %}">
            <span class="fas fa-file-video"></span> ADD VIDEO
        </a>
        <a class="link-button" href="{% url "courses:module_content_create" module.id "file" %}">
            <span class="fas fa-file-alt"></span> ADD FILE</a>

        <div id="module-contents-list">
            {% for content in module.contents.all %}
                <div class="plain-text-area" data-id="{{ content.id }}">
                    {% with item=content.item %}
                        ({{ item|model_name }})<br>
                        {{ item }}<br>
                        <form action="{% url "courses:module_content_delete" content.id %}"
                              method="post">
                            <a class="link-button"
                               href="{% url "courses:module_content_update" module.id item|model_name item.id %}">
                                Edit
                            </a>
                            <input class="link-button" type="submit" value="Delete">
                            {% csrf_token %}
                        </form>
                    {% endwith %}
                </div>
            {% empty %}
                <p>This module has no contents yet</p>
            {% endfor %}
        </div>
    {% endwith %}
{% endblock %}
